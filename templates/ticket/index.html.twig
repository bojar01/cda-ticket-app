{% extends 'base.html.twig' %}

{% block title %}Ticket index
{% endblock %}

{% block body %}
	<h1>Ticket index</h1>

	<table class="table">
		<thead>
			<tr>
				<th>Ticket Id</th>
				<th>name</th>
				<th>session</th>
				<th>technology</th>
				<th>Subject</th>
				<th>Status</th>
				<th>Priority</th>
				<th>Created_at</th>
				{# <th>Updated_at</th> #}
				<th>actions</th>
			</tr>
		</thead>
		<tbody>
			{% for ticket in tickets %}
				<tr>
					{# {{ dump(ticket )}} #}
					<td>#{{ ticket.id }}</td>
					<td>{{ ticket.owner.firstname }}
						{{ ticket.owner.lastname }}</td>
					<td>
					{% if ticket.owner.session %}
                    	<span class="badge bg-primary" >{{ ticket.owner.session.name }}</span>
					{% else %}
						-
					{% endif %}
                    {# {{ ticket.owner.session.name }} #}
                    </td>
					<td>{{ ticket.technology.name }}</td>
					<td>{{ ticket.subject }}</td>
					<td>{{ ticket.status.name }}</td>
					<td>
						{% if ticket.priority %}
							<span class="badge bg-warning" >Elev√©e</span>
						{% else %}
							<span class="badge bg-success">Normale</span>
						{% endif %}
					</td>
					<td>{{ ticket.createdAt ? ticket.createdAt|date('Y-m-d H:i:s') : '' }}</td>
					{# <td>{{ ticket.updatedAt ? ticket.updatedAt|date('Y-m-d H:i:s') : '' }}</td> #}
					<td>
						<a href="{{ path('app_ticket_show', {'id': ticket.id}) }}">show</a>
						<a href="{{ path('app_ticket_edit', {'id': ticket.id}) }}">edit</a>
					</td>
				</tr>
			{% else %}
				<tr>
					<td colspan="6">no records found</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>

	<a href="{{ path('app_ticket_new') }}">Create new</a>
{% endblock %}
