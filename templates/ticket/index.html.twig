{% extends 'baseDashboard.html.twig' %}

{% block title %}Ticket index
{% endblock %}

{% block body %}
<div class="card ard bg-main-color text-white mx-auto mt-5 p-5 rounded-4">
	<main class="container">
		<section class="row">
			<div class="col-12">
				<h1>Ticket index</h1>
			</div>
			<table class="table">
				<thead>
					<tr>
						<th>Id</th>
						<th>Image</th>
						<th>name</th>
						<th>session</th>
						<th>Priority</th>
						<th>technology</th>
						<th>Subject</th>
						<th>Status</th>
						<th>Created_at</th>
						<th>Updated_at</th>
						<th>actions</th>
					</tr>
				</thead>
				<tbody>
					{% for ticket in tickets %}
						<tr>
							{# <pre>
								{{ dump(ticket) }}
							</pre> #}
							<td>{{ ticket.id }}</td>
							<td>{{ ticket.image }} <img src="{{ asset('uploads/images/' ~ ticket.image) }}" class="card-img-top" alt="..."> </td>
							<td>{{ ticket.owner.firstname }}
								{{ ticket.owner.lastname }}</td>
							<td>
								{{ ticket.owner.session.name }}
							</td>
							<td>
								{{ ticket.status.name }}
							</td>
							<td>{{ ticket.technology.name }}</td>
							<td>{{ ticket.subject }}</td>
							<td>
								{% if ticket.priority %}
									<span class="badge bg-warning">Elev√©e</span>
								{% else %}
									<span class="badge bg-success">Normale</span>
								{% endif %}
							</td>
							<td>{{ ticket.createdAt ? ticket.createdAt|date('Y-m-d H:i:s') : '' }}</td>
							<td>{{ ticket.updatedAt ? ticket.updatedAt|date('Y-m-d H:i:s') : '' }}</td>
							<td>
								<a href="{{ path('app_ticket_show', {'id': ticket.id}) }}">show</a>
								<a href="{{ path('app_ticket_edit', {'id': ticket.id}) }}">edit</a>
							</td>
						</tr>
					{% else %}
						<tr>
							<td colspan="6">no records found</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>

			<a href="{{ path('app_ticket_new') }}" class="text-white text-center">Create new</a>
			<a href="{{ path('app_search') }}" class="text-white text-center">Search</a>
		</section>
	</main>
</div>
{% endblock %}
